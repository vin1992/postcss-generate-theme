'use strict';

var _isCssColorHex = require('is-css-color-hex');

var _isCssColorHex2 = _interopRequireDefault(_isCssColorHex);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Shorten 6 character hexes to 3 characters
 * @param {String} hex - hex to shorten
 * @throws {TypeError} - hex is not a string
 * @return {String} - shortened hex
 */
module.exports = function (hex) {
  var lowerHex = undefined;

  if (typeof hex !== 'string') {
    throw new TypeError('Expected a string');
  }

  if (!(0, _isCssColorHex2.default)(hex)) {
    throw new Error('Expected a string with 3 or 6 hex characters and a # prefix');
  }

  lowerHex = hex.toLowerCase();

  // three matching character pairs
  if (lowerHex[1] === lowerHex[2] && lowerHex[3] === lowerHex[4] && lowerHex[5] === lowerHex[6]) {
    if (lowerHex.length === 7) {
      return '#' + lowerHex[1] + lowerHex[3] + lowerHex[5];
    }

    if (lowerHex[7] === lowerHex[8]) {
      return '#' + lowerHex[1] + lowerHex[3] + lowerHex[5] + lowerHex[7];
    }
  }

  return hex;
};